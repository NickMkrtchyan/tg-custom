# Инструкция по развертыванию автообновлений

## На продакшн-сайте (один раз)

После того, как вы запушите код с автообновлениями в GitHub, на **реальном сайте** нужно **один раз** выполнить следующие шаги:

### 1. Подключитесь к серверу
Через FTP, SSH или файловый менеджер хостинга.

### 2. Перейдите в папку плагина
```
/wp-content/plugins/tg-custom/
```

### 3. Скачайте библиотеку plugin-update-checker
Выполните команду (если есть SSH доступ):
```bash
cd /path/to/wp-content/plugins/tg-custom/
git clone https://github.com/YahnisElsts/plugin-update-checker.git plugin-update-checker
```

**ИЛИ** скачайте вручную:
- Скачайте ZIP: https://github.com/YahnisElsts/plugin-update-checker/archive/refs/heads/master.zip
- Распакуйте в папку `plugin-update-checker/` внутри плагина

### 4. Проверьте структуру
Должно получиться:
```
/wp-content/plugins/tg-custom/
    ├── plugin-update-checker/
    │   ├── plugin-update-checker.php
    │   └── ... (другие файлы библиотеки)
    ├── tg-course-bot-pro.php
    └── ... (остальные файлы плагина)
```

### 5. Готово!
Теперь WordPress будет автоматически проверять обновления с GitHub.

---

## Как работает процесс обновления

### На локальной машине:
1. Вы делаете изменения в коде
2. **Обновляете версию** в `tg-course-bot-pro.php`:
   ```php
   * Version: 1.0.1  // было 1.0.0
   ```
3. Коммитите и пушите в GitHub:
   ```bash
   git add .
   git commit -m "Update: описание изменений"
   git push origin main
   ```

### На продакшн-сайте:
1. WordPress автоматически проверяет обновления (каждые 12 часов)
2. Видит новую версию на GitHub
3. Показывает уведомление "Update available" в админке
4. Вы (или автообновление) нажимаете "Update now"
5. Плагин обновляется! ✅

---

## Важные моменты

⚠️ **Всегда обновляйте номер версии** в `tg-course-bot-pro.php` перед пушем, иначе WordPress не увидит обновление!

⚠️ **Библиотека `plugin-update-checker/` НЕ пушится в GitHub** (она в `.gitignore`), поэтому её нужно установить на продакшене вручную **один раз**.

✅ После первой настройки все последующие обновления будут **полностью автоматическими**.

---

## Проверка работы

После настройки на продакшене:
1. Зайдите в админку WordPress
2. Плагины → Установленные
3. Если всё работает, вы НЕ увидите ошибок
4. Сделайте тестовое изменение локально (измените версию на 1.0.1)
5. Запушьте в GitHub
6. Подождите ~5-10 минут или принудительно проверьте обновления в админке
7. Должно появиться уведомление об обновлении!
